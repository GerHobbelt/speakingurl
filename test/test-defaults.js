/* global describe,it */

var getSlug = require('../lib').getSlug;

describe('getSlug defaults', function () {
    'use strict';

    it('should replace whitespaces with separator', function (done) {

        getSlug('foo bar baz')
            .should.eql('foo-bar-baz');

        done();
    });

    it('should remove trailing space if any', function (done) {

        getSlug(' foo bar baz ')
            .should.eql('foo-bar-baz');

        done();
    });

    it('should remove multiple whitespaces', function (done) {

        getSlug(' foo bar  baz   FOO    BAR      BAZ      ')
            .should.eql('foo-bar-baz-foo-bar-baz');

        done();
    });

    it('should remove multiple separators at start and end', function (done) {

        getSlug('-foo- bar -baz-')
            .should.eql('foo-bar-baz');
        getSlug('--foo- bar -baz---')
            .should.eql('foo-bar-baz');
        getSlug('---foo- bar -baz---')
            .should.eql('foo-bar-baz');

        done();
    });

    it('should remove multple separators', function (done) {

        getSlug('foo- bar -baz')
            .should.eql('foo-bar-baz');

        done();
    });

    it('should remove non-base64 characters', function (done) {

        var nonBase64 = ['[', ']', ',', '*', '+', '~', '.', '(', ')', '\'', '"', '!', ':', '@'];

        for (var i = 0; i < nonBase64.length; i++) {
            getSlug("foo " + nonBase64[i] + " bar baz")
                .should.eql("foo-bar-baz");
        }

        done();
    });

    it('should remove trailing separator', function (done) {

        getSlug('C\'est un beau titre qui ne laisse rien à désirer  ! ')
            .should.eql(
                'c-est-un-beau-titre-qui-ne-laisse-rien-a-desirer');

        done();
    });

    it('should not fail if symbol at the end', function (done) {

        getSlug('test &')
            .should.eql('test-and');
        getSlug('test & ')
            .should.eql('test-and');
        getSlug('test &', '_')
            .should.eql('test_and');

        done();

    });

});
